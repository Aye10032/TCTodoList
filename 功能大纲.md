# TC Todo List

## 功能

### Player group

主要用于任务的权限管理，初步设想包括以下分组：

- 管理员：全服的所有权限
- 小组管理员：小组的所有权限
- 玩家：默认可见服务器级别的任务，当属于某个小组时，可以看到小组的任务

对分组管理，使用指令进行，不设置界面

### TDOO list

在界面上显示你当前能够查看到的分组，包括：

- 服务器公用任务
- 有权限的分组任务

对每一条任务，有以下按钮：

- 查看承接人列表
  - 点击后出现子UI，
    - 最上面显示任务信息，包括坐标、创建时间等
      - 编辑任务坐标（有权限需求）
      - 承接任务按钮
    - 下面显示每一个承接玩家的头像和ID
      - 鼠标指针指向头像时悬浮窗显示留言和最后更新时间（参考FF14部队房留言板）
      - 分别有一个按钮，可以从这个界面对该玩家进行留言
      - 自己头像多出编辑按钮，可以更新留言
- 复制坐标ID到剪切板
- 将任务设为已/未完成（仅任务拥有者和任务所在分组管理员和服务器管理员）

### 留言

留言界面，通过UUID进行玩家绑定，设想类似游戏默认聊天窗口

- 当玩家上线时，会检测是否有未读留言

- 每隔一定时间检测是否有未读留言

若有，则playsound，发送聊天窗口信息，并且GUI界面显示红色感叹号

## 数据库



### 任务(Task)

- id
- name：任务名称
- pos：任务关键点坐标
- owner：任务创建人
- time：任务创建时间
- lastUpdateTime：任务最后留言更新时间
- group：任务所属组(留空则默认为服务器组)
- status：状态（是否完成）
- undertakerList(List)：任务承接ID


### 分组(Group)

- id
- owner：组创建人
- name：组名称(唯一)
- information：组简介
- admins(List)：组管理员列表

### 玩家(Player)

- id
- name：玩家ID
- uuid：玩家UUID
- admin：玩家管理员权限
- groups(List)：玩家所属组

### 留言(Message)

- ID
- 目标玩家
- 发送玩家
- 时间
- 内容
- 是否已读
- 关联ID（若有，则代表来自某个任务；没有则表示就是单纯的留言）

### 承接信息(Undertake)

- id
- playerId：玩家ID
- msg：玩家留言
- time：承接时间
- lastUpdateTime：最后更新时间
- fromTask：承接任务ID